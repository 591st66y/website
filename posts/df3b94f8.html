<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>
        Naij`s Blog
    </title>
    <link rel="stylesheet" href="/libs/highlight/styles/monokai-sublime.css">
    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/style.css">
</head>

<body id="bodyx">
    <div class="hd posts">
    <a href="/index.html"><i class="fa fa-reply replay-btn" aria-hidden="true"></i></a>
    <div class="post-title">
        <p>
            JavaScript判断浏览器类型
        </p>
        <hr>
    </div>
    <div class="post-content">
        <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">BrowserType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// 权重：系统 + 系统版本 &gt; 平台 &gt; 内核 + 载体 + 内核版本 + 载体版本 &gt; 外壳 + 外壳版本</span></span><br><span class="line">	<span class="keyword">const</span> ua = navigator.userAgent.toLowerCase();</span><br><span class="line">	<span class="keyword">const</span> testUa = <span class="function"><span class="params">regexp</span> =&gt;</span> regexp.test(ua);</span><br><span class="line">	<span class="keyword">const</span> testVs = <span class="function"><span class="params">regexp</span> =&gt;</span> (ua.match(regexp) + <span class="string">""</span>)</span><br><span class="line">		.replace(<span class="regexp">/[^0-9|_.]/ig</span>, <span class="string">""</span>)</span><br><span class="line">		.replace(<span class="regexp">/_/ig</span>, <span class="string">"."</span>);</span><br><span class="line">	<span class="comment">// 系统</span></span><br><span class="line">	<span class="keyword">let</span> system = <span class="string">"unknown"</span>;</span><br><span class="line">	<span class="keyword">if</span> (testUa(<span class="regexp">/windows|win32|win64|wow32|wow64/ig</span>)) &#123;</span><br><span class="line">		system = <span class="string">"windows"</span>; <span class="comment">// window系统</span></span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (testUa(<span class="regexp">/macintosh|macintel/ig</span>)) &#123;</span><br><span class="line">		system = <span class="string">"macos"</span>; <span class="comment">// macos系统</span></span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (testUa(<span class="regexp">/x11/ig</span>)) &#123;</span><br><span class="line">		system = <span class="string">"linux"</span>; <span class="comment">// linux系统</span></span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (testUa(<span class="regexp">/android|adr/ig</span>)) &#123;</span><br><span class="line">		system = <span class="string">"android"</span>; <span class="comment">// android系统</span></span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (testUa(<span class="regexp">/ios|iphone|ipad|ipod|iwatch/ig</span>)) &#123;</span><br><span class="line">		system = <span class="string">"ios"</span>; <span class="comment">// ios系统</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 系统版本</span></span><br><span class="line">	<span class="keyword">let</span> systemVs = <span class="string">"unknown"</span>;</span><br><span class="line">	<span class="keyword">if</span> (system === <span class="string">"windows"</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (testUa(<span class="regexp">/windows nt 5.0|windows 2000/ig</span>)) &#123;</span><br><span class="line">			systemVs = <span class="string">"2000"</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (testUa(<span class="regexp">/windows nt 5.1|windows xp/ig</span>)) &#123;</span><br><span class="line">			systemVs = <span class="string">"xp"</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (testUa(<span class="regexp">/windows nt 5.2|windows 2003/ig</span>)) &#123;</span><br><span class="line">			systemVs = <span class="string">"2003"</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (testUa(<span class="regexp">/windows nt 6.0|windows vista/ig</span>)) &#123;</span><br><span class="line">			systemVs = <span class="string">"vista"</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (testUa(<span class="regexp">/windows nt 6.1|windows 7/ig</span>)) &#123;</span><br><span class="line">			systemVs = <span class="string">"7"</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (testUa(<span class="regexp">/windows nt 6.2|windows 8/ig</span>)) &#123;</span><br><span class="line">			systemVs = <span class="string">"8"</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (testUa(<span class="regexp">/windows nt 6.3|windows 8.1/ig</span>)) &#123;</span><br><span class="line">			systemVs = <span class="string">"8.1"</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (testUa(<span class="regexp">/windows nt 10.0|windows 10/ig</span>)) &#123;</span><br><span class="line">			systemVs = <span class="string">"10"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (system === <span class="string">"macos"</span>) &#123;</span><br><span class="line">		systemVs = testVs(<span class="regexp">/os x [\d._]+/ig</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (system === <span class="string">"android"</span>) &#123;</span><br><span class="line">		systemVs = testVs(<span class="regexp">/android [\d._]+/ig</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (system === <span class="string">"ios"</span>) &#123;</span><br><span class="line">		systemVs = testVs(<span class="regexp">/os [\d._]+/ig</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 平台</span></span><br><span class="line">	<span class="keyword">let</span> platform = <span class="string">"unknow"</span>;</span><br><span class="line">	<span class="keyword">if</span> (system === <span class="string">"windows"</span> || system === <span class="string">"macos"</span> || system === <span class="string">"linux"</span>) &#123;</span><br><span class="line">		platform = <span class="string">"desktop"</span>; <span class="comment">// 桌面端</span></span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (system === <span class="string">"android"</span> || system === <span class="string">"ios"</span> || testUa(<span class="regexp">/mobile/ig</span>)) &#123;</span><br><span class="line">		platform = <span class="string">"mobile"</span>; <span class="comment">// 移动端</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 内核和载体</span></span><br><span class="line">	<span class="keyword">let</span> engine = <span class="string">"unknow"</span>;</span><br><span class="line">	<span class="keyword">let</span> supporter = <span class="string">"unknow"</span>;</span><br><span class="line">	<span class="keyword">if</span> (testUa(<span class="regexp">/applewebkit/ig</span>) &amp;&amp; testUa(<span class="regexp">/safari/ig</span>)) &#123;</span><br><span class="line">		engine = <span class="string">"webkit"</span>; <span class="comment">// webkit内核</span></span><br><span class="line">		<span class="keyword">if</span> (testUa(<span class="regexp">/edge/ig</span>)) &#123;</span><br><span class="line">			supporter = <span class="string">"edge"</span>; <span class="comment">// edge浏览器</span></span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (testUa(<span class="regexp">/opr/ig</span>)) &#123;</span><br><span class="line">			supporter = <span class="string">"opera"</span>; <span class="comment">// opera浏览器</span></span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (testUa(<span class="regexp">/chrome/ig</span>)) &#123;</span><br><span class="line">			supporter = <span class="string">"chrome"</span>; <span class="comment">// chrome浏览器</span></span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			supporter = <span class="string">"safari"</span>; <span class="comment">// safari浏览器</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (testUa(<span class="regexp">/gecko/ig</span>) &amp;&amp; testUa(<span class="regexp">/firefox/ig</span>)) &#123;</span><br><span class="line">		engine = <span class="string">"gecko"</span>; <span class="comment">// gecko内核</span></span><br><span class="line">		supporter = <span class="string">"firefox"</span>; <span class="comment">// firefox浏览器</span></span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (testUa(<span class="regexp">/presto/ig</span>)) &#123;</span><br><span class="line">		engine = <span class="string">"presto"</span>; <span class="comment">// presto内核</span></span><br><span class="line">		supporter = <span class="string">"opera"</span>; <span class="comment">// opera浏览器</span></span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (testUa(<span class="regexp">/trident|compatible|msie/ig</span>)) &#123;</span><br><span class="line">		engine = <span class="string">"trident"</span>; <span class="comment">// trident内核</span></span><br><span class="line">		supporter = <span class="string">"iexplore"</span>; <span class="comment">// iexplore浏览器</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 内核版本</span></span><br><span class="line">	<span class="keyword">let</span> engineVs = <span class="string">"unknow"</span>;</span><br><span class="line">	<span class="keyword">if</span> (engine === <span class="string">"webkit"</span>) &#123;</span><br><span class="line">		engineVs = testVs(<span class="regexp">/applewebkit\/[\d.]+/ig</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (engine === <span class="string">"gecko"</span>) &#123;</span><br><span class="line">		engineVs = testVs(<span class="regexp">/gecko\/[\d.]+/ig</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (engine === <span class="string">"presto"</span>) &#123;</span><br><span class="line">		engineVs = testVs(<span class="regexp">/presto\/[\d.]+/ig</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (engine === <span class="string">"trident"</span>) &#123;</span><br><span class="line">		engineVs = testVs(<span class="regexp">/trident\/[\d.]+/ig</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 载体版本</span></span><br><span class="line">	<span class="keyword">let</span> supporterVs = <span class="string">"unknow"</span>;</span><br><span class="line">	<span class="keyword">if</span> (supporter === <span class="string">"chrome"</span>) &#123;</span><br><span class="line">		supporterVs = testVs(<span class="regexp">/chrome\/[\d.]+/ig</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (supporter === <span class="string">"safari"</span>) &#123;</span><br><span class="line">		supporterVs = testVs(<span class="regexp">/version\/[\d.]+/ig</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (supporter === <span class="string">"firefox"</span>) &#123;</span><br><span class="line">		supporterVs = testVs(<span class="regexp">/firefox\/[\d.]+/ig</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (supporter === <span class="string">"opera"</span>) &#123;</span><br><span class="line">		supporterVs = testVs(<span class="regexp">/opr\/[\d.]+/ig</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (supporter === <span class="string">"iexplore"</span>) &#123;</span><br><span class="line">		supporterVs = testVs(<span class="regexp">/(msie [\d.]+)|(rv:[\d.]+)/ig</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (supporter === <span class="string">"edge"</span>) &#123;</span><br><span class="line">		supporterVs = testVs(<span class="regexp">/edge\/[\d.]+/ig</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 外壳和外壳版本</span></span><br><span class="line">	<span class="keyword">let</span> shell = <span class="string">"none"</span>;</span><br><span class="line">	<span class="keyword">let</span> shellVs = <span class="string">"unknow"</span>;</span><br><span class="line">	<span class="keyword">if</span> (testUa(<span class="regexp">/micromessenger/ig</span>)) &#123;</span><br><span class="line">		shell = <span class="string">"wechat"</span>; <span class="comment">// 微信浏览器</span></span><br><span class="line">		shellVs = testVs(<span class="regexp">/micromessenger\/[\d.]+/ig</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (testUa(<span class="regexp">/qqbrowser/ig</span>)) &#123;</span><br><span class="line">		shell = <span class="string">"qq"</span>; <span class="comment">// QQ浏览器</span></span><br><span class="line">		shellVs = testVs(<span class="regexp">/qqbrowser\/[\d.]+/ig</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (testUa(<span class="regexp">/ubrowser/ig</span>)) &#123;</span><br><span class="line">		shell = <span class="string">"uc"</span>; <span class="comment">// UC浏览器</span></span><br><span class="line">		shellVs = testVs(<span class="regexp">/ubrowser\/[\d.]+/ig</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (testUa(<span class="regexp">/2345explorer/ig</span>)) &#123;</span><br><span class="line">		shell = <span class="string">"2345"</span>; <span class="comment">// 2345浏览器</span></span><br><span class="line">		shellVs = testVs(<span class="regexp">/2345explorer\/[\d.]+/ig</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (testUa(<span class="regexp">/metasr/ig</span>)) &#123;</span><br><span class="line">		shell = <span class="string">"sougou"</span>; <span class="comment">// 搜狗浏览器</span></span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (testUa(<span class="regexp">/lbbrowser/ig</span>)) &#123;</span><br><span class="line">		shell = <span class="string">"liebao"</span>; <span class="comment">// 猎豹浏览器</span></span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (testUa(<span class="regexp">/maxthon/ig</span>)) &#123;</span><br><span class="line">		shell = <span class="string">"maxthon"</span>; <span class="comment">// 遨游浏览器</span></span><br><span class="line">		shellVs = testVs(<span class="regexp">/maxthon\/[\d.]+/ig</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (testUa(<span class="regexp">/bidubrowser/ig</span>)) &#123;</span><br><span class="line">		shell = <span class="string">"baidu"</span>; <span class="comment">// 百度浏览器</span></span><br><span class="line">		shellVs = testVs(<span class="regexp">/bidubrowser [\d.]+/ig</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">Object</span>.assign(&#123;</span><br><span class="line">		engine, <span class="comment">// webkit gecko presto trident</span></span><br><span class="line">		engineVs,</span><br><span class="line">		platform, <span class="comment">// desktop mobile</span></span><br><span class="line">		supporter, <span class="comment">// chrome safari firefox opera iexplore edge</span></span><br><span class="line">		supporterVs,</span><br><span class="line">		system, <span class="comment">// windows macos linux android ios</span></span><br><span class="line">		systemVs</span><br><span class="line">	&#125;, shell === <span class="string">"none"</span> ? &#123;&#125; : &#123;</span><br><span class="line">		shell, <span class="comment">// wechat qq uc 2345 sougou liebao maxthon baidu</span></span><br><span class="line">		shellVs</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
    </div>

    
</div>
    <div class="footer" id="footer">
    <p>Copyright © 2020 <a class="flink" href="https://hexo.io" target="_blank" rel="noopener">Hexo</a>-<a class="flink" href="https://github.com/sanjinhub/hexo-theme-geek" target="_blank" rel="noopener">Geek</a>.
        <label class="el-switch el-switch-green el-switch-sm" style="vertical-align: sub;">
            <input type="checkbox" name="switch" id="update_style">
            <span class="el-switch-style"></span>
        </label>
    </p>
</div>
<input type="hidden" id="web_style" value="black">

<script src="/libs/jquery.min.js"></script>
<script src="/libs/highlight/highlight.pack.js"></script>
<script src='//cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>
<script src="/js/js.js"></script>
<style type="text/css">
.v * {
    color: #698fca;
}

.v .vlist .vcard .vhead .vsys {
    color: #3a3e4a;
}

.v .vlist .vcard .vh .vmeta .vat {
    color: #638fd5;
}

.v .vlist .vcard .vhead .vnick {
    color: #6ba1ff;
}

.v a {
    color: #8696b1;
}

.v .vlist .vcard .vhead .vnick:hover {
    color: #669bfc;
}
</style>
</body>

</html>